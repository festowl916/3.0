<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Festival Memanah Tradisional OWL916 3.0</title>
  <link rel="stylesheet" href="daftar.css">
</head>
<body>

<main class="form-wrapper">

  <!-- LOGO -->
  <div class="logo-bar">
    <img src="logo1.png">
    <img src="logo2.png">
    <img src="logo3.png">
    <img src="logo4.png">
    <img src="logo5.png">
    <img src="logo6.png">
  </div>

  <h2 class="festival-title">Festival Memanah Tradisional OWL916 3.0</h2>
  <h1>Pendaftaran Peserta</h1>

  <!-- üî¥ SATU FORM SAHAJA -->
  <form
    method="POST"
    action="https://script.google.com/macros/s/AKfycbwoI_tI-WCNWLL9ACUfDgb5mI4jiFyZLF5Hj8v_aIWzoOHmqkErWVqdhA7dviZE7MoT4g/exec"
    enctype="multipart/form-data"
  >

    <!-- JENIS PENDAFTARAN -->
    <label class="section-title">Jenis Pendaftaran</label>
    <select name="jenis_pendaftaran" required>
      <option value="">‚Äî Pilih ‚Äî</option>
      <option value="dengan_baju">Daftar dan baju</option>
      <option value="tanpa_baju">Daftar tanpa baju</option>
      <option value="beli_baju" disabled>Belum dibuka</option>
    </select>

    <!-- MAKLUMAT ASAS -->
    <label>Nama Penuh</label>
    <input type="text" name="nama_penuh" required>

    <label>Nama Kelab</label>
    <input type="text" name="kelab" required>

    <!-- KATEGORI -->
    <p class="note">
      Peserta 18 tahun ke atas boleh memilih kategori Arrow Carbon,
      Arrow Natural atau kedua-duanya.
    </p>

    <label>Kategori Arrow Carbon</label>
    <select name="arrow_carbon">
      <option value="">‚Äî Tidak Pilih ‚Äî</option>
      <option>VETERAN LELAKI</option>
      <option>LELAKI DEWASA</option>
      <option>WANITA DEWASA</option>
      <option>REMAJA LELAKI</option>
      <option>REMAJA PEREMPUAN</option>
      <option>CILIK LELAKI</option>
      <option>CILIK PEREMPUAN</option>
    </select>

    <label>Kategori Arrow Natural</label>
    <select name="arrow_natural">
      <option value="">‚Äî Tidak Pilih ‚Äî</option>
      <option>TERBUKA LELAKI</option>
      <option>TERBUKA WANITA</option>
    </select>

    <!-- NEGERI / NEGARA -->
    <label>Negeri / Negara</label>
    <select name="negeri" required>
      <option value="">‚Äî Pilih ‚Äî</option>
      <option>JOHOR</option>
      <option>KEDAH</option>
      <option>KELANTAN</option>
      <option>MELAKA</option>
      <option>NEGERI SEMBILAN</option>
      <option>PAHANG</option>
      <option>PULAU PINANG</option>
      <option>PERAK</option>
      <option>PERLIS</option>
      <option>SELANGOR</option>
      <option>TERENGGANU</option>
      <option>SABAH</option>
      <option>SARAWAK</option>
      <option>KUALA LUMPUR</option>
      <option>LABUAN</option>
      <option>BRUNEI</option>
      <option>SINGAPURA</option>
      <option>INDONESIA</option>
      <option>THAILAND</option>
      <option>LAIN-LAIN</option>
    </select>

    <!-- BAJU -->
    <label>Saiz Baju</label>
    <input type="text" name="saiz_baju" placeholder="S / M / L / XL">

    <label>Alamat Penghantaran</label>
    <textarea name="alamat_penghantaran" rows="3"
      placeholder="Alamat penuh penghantaran"></textarea>

    <!-- IC & TELEFON -->
    <label>No IC</label>
    <input type="text" name="ic" required>

    <label>No Telefon</label>
    <input type="tel" name="telefon" required>

    <!-- BAYARAN -->
    <div class="bank-info">
      <strong>Maklumat Bayaran</strong><br>
      Bank: <strong>Bank Rakyat</strong><br>
      No. Akaun: <strong>1102358633</strong><br>
      Penama:
      <strong>Persatuan Memanah Tradisional Negeri Terengganu</strong>
    </div>

    <!-- RESIT -->
    <label>Bukti Pembayaran (Upload PDF / Gambar)</label>
    <input type="file" name="resit" accept="image/*,.pdf" required>

    <button type="submit" class="btn-submit">
      Hantar Pendaftaran
    </button>

  </form>

  <a href="index.html">‚Üê Kembali laman utama</a>

</main>

<footer>
  <p>Maklumat peribadi peserta adalah sulit &amp; tidak dikongsi</p>
  ¬© 2026 Persatuan Memanah Tradisional Negeri Terengganu<br>
  ¬© 2026 festOWL 916 3.0
</footer>
<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbyDW1OocxVASlgHOeYrq6dYakk0FrLLb-xlz3k6ZVffsSe4tEIl7qwek_77csWKdlULLg/exec";

document.getElementById("daftarForm").addEventListener("submit", function(e){
  e.preventDefault();

  const form = e.target;
  const fileInput = form.querySelector('input[name="resit"]');
  const file = fileInput.files[0];

  if (!file) {
    alert("Sila upload resit");
    return;
  }

  const reader = new FileReader();
  reader.onload = function() {
    const payload = {
      jenis_pendaftaran: form.jenis_pendaftaran.value,
      nama_penuh: form.nama_penuh.value,
      kelab: form.kelab.value,
      arrow_carbon: form.arrow_carbon.value,
      arrow_natural: form.arrow_natural.value,
      negeri: form.negeri.value,
      saiz_baju: form.saiz_baju.value,
      alamat_penghantaran: form.alamat_penghantaran.value,
      ic: form.ic.value,
      telefon: form.telefon.value,
      fileName: file.name,
      fileType: file.type,
      fileData: reader.result.split(",")[1]
    };

    fetch(scriptURL, {
      method: "POST",
      body: JSON.stringify(payload),
      headers: { "Content-Type": "application/json" }
    })
    .then(res => res.text())
    .then(() => {
      alert("Pendaftaran berjaya");
      form.reset();
    })
    .catch(err => {
      alert("Gagal hantar borang");
      console.error(err);
    });
  };

  reader.readAsDataURL(file);
});
</script>

</body>
</html>




